<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    
    
    <parameters>
        <!-- User -->
        <parameter key="user_provider.service.class">Galaxy\FrontendBundle\Service\Security\UserProvider</parameter>
        <parameter key="user_info.service.class">Galaxy\FrontendBundle\Service\UserInfoService</parameter>
        <parameter key="user.service.class">Galaxy\FrontendBundle\Service\UserService</parameter>
        <parameter key="prize.service.class">Galaxy\FrontendBundle\Service\PrizeService</parameter>
        <parameter key="usersurl">http://demo11.qwer.com.ua/users</parameter>
        <parameter key="user_providers.user_login.url">%usersurl%/{login}.json</parameter>
        <parameter key="docsurl">http://demo10.qwer.com.ua/documents</parameter>
        <parameter key="user_providers.funds_info.url">%docsurl%/{userId}/funds.json</parameter>
        <parameter key="gameurl">http://demo10.qwer.com.ua/games</parameter>
        <parameter key="user_providers.game_info.url">%gameurl%/{userId}/user/info.json</parameter>
        <parameter key="user_providers.log_info.url">%gameurl%/{userId}/users/{page}/logs/{length}.json</parameter>
        <parameter key="user_providers.log_info_count.url">%gameurl%/{userId}/log/count.json</parameter>
        <parameter key="jump.url">http://demo10.qwer.com.ua/jump</parameter>
        <parameter key="image.folder">/bundles/galaxyfrontend/images/point/{tag}.png</parameter>
        <parameter key="space.url">http://localhost:8080/gala</parameter>
        <parameter key="space.prizes_info.url">%space.url%/prize/list</parameter>
        <parameter key="elements.url">gala.my</parameter>
        <parameter key="buy_element.url">%elements.url%/elements/{userId}/buy.json</parameter>
        <parameter key="game.get_question.url">%questions.url%/{userId}.json</parameter>
        <parameter key="questions.url">>http://demo10.qwer.com.ua/questions</parameter>
        <parameter key="game.answer_question.url">%questions.url%/{questionId}/answers/{answer}.json</parameter>
        <parameter key="question.memcache.key">quest</parameter>
        
        <!-- -->
    </parameters>

    <services>
        <service id="galaxy.user_provider.service" class="%user_provider.service.class%">
            <call method="setContainer">
                <argument type="service" id="service_container"/>
            </call>
        </service>
        <service id="galaxy.prize.service" class="%prize.service.class%"/>  
        <service id="galaxy.user_info.service" class="%user_info.service.class%">
             <call method="setContainer">
                <argument type="service" id="service_container"/>
            </call>
        </service>
        <service id="galaxy.user.service" class="%user.service.class%">
            <call method="setGetUserUrl">
                <argument type="string">%user_providers.user_login.url%</argument>
            </call>
        </service>
        <service id="galaxy.security.authentication.provider"
                 class="Galaxy\FrontendBundle\Security\Authentication\Provider\GalaxyProvider" public="false">
            <argument /> <!-- User Provider -->
        </service>

        <service id="galaxy.security.authentication.listener"
                 class="Galaxy\FrontendBundle\Security\Firewall\AuthListener" 
                 public="false"
                 parent="security.authentication.listener.abstract"
                 abstract="true">
        </service>
        <service id="question.service" class="Galaxy\FrontendBundle\Service\QuestionService">
            <call method="setMemcache">
                <argument type="service" id="memcache.default" />
            </call>
            <call method="setQuestionMemcacheKey">
                <argument type="string">%question.memcache.key%</argument>
            </call>
        </service>
    </services>
    
</container>
